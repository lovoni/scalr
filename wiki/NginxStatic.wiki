#summary How to configure nginx to serve static content on www role

= Introduction =

Scalr shared `www` role employs lightweight [http://nginx.net/ nginx] HTTP server. 
Nginx serves static files with exceptional speed.
By default, it is configured to proxy all requests to all instances of  Application Servers role, if you included one in your farm.
However, if you are giving out a lot of static content (images, html files or downloads), serving them with application server (Apache or any other, depending on the Application server role you selected) is not optimal. 

Let's tweak nginx config so it will serve files of specified extensions, while proxying the rest of traffic to app instances.


= HOW-TO  =

 # Launch your farm and click on SSH icon to log in to one of `www` role instances.
 # Type `vi /etc/nginx/nginx.conf`. Press `i` to enter insert mode. Go to the end of the `server {}`
 section and paste a following piece of code:

{{{
location ~* ^.+\.(jpg|jpeg|gif|png|ico|css|zip|tgz|gz|rar|bz2|pdf|txt|tar|wav|bmp|rtf|js|flv|swf|html|htm)$
{
    root   /var/www/static-content;
}
}}}

where `/var/www/static-content` is your place for static files. 

 # do `killall -HUP nginx` to reload nginx.
 # Go to Scalr and click "Synchronize to all" to propagate changes across all instances of `www` role.